<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çƒŸèŠ±é¢„è§ˆ</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14"></script>
</head>
<body>
    <div id="app">
        <!-- è½®æ’­å›¾ -->
        <div class="banner-container">
            <div class="banner" 
                 v-if="banners.length > 0"
                 @touchstart="handleTouchStart"
                 @touchmove="handleTouchMove"
                 @touchend="handleTouchEnd"
                 @mousedown="handleMouseDown"
                 @mousemove="handleMouseMove"
                 @mouseup="handleMouseUp"
                 @mouseleave="handleMouseUp">
                <transition-group name="fade">
                    <div v-for="(banner, index) in banners" 
                         :key="banner.id" 
                         class="banner-slide"
                         v-show="index === currentBannerIndex"
                         @click="handleBannerClick(banner)"
                         :style="{ cursor: banner.linkType ? 'pointer' : 'default' }">
                        <img :src="banner.url" 
                             @error="handleImageError"
                             draggable="false"
                             alt="è½®æ’­å›¾">
                    </div>
                </transition-group>
                <!-- æ·»åŠ æŒ‡ç¤ºå™¨ -->
                <div class="banner-indicators">
                    <span v-for="(banner, index) in banners" 
                          :key="banner.id"
                          :class="{ active: index === currentBannerIndex }"
                          @click="setCurrentBanner(index)">
                    </span>
                </div>
            </div>
            <div v-else class="no-banner">
                æš‚æ— è½®æ’­å›¾
            </div>
        </div>

        <!-- æœç´¢æ¡† -->
        <div class="search-container">
            <input type="text" 
                   v-model="searchQuery" 
                   @input="handleSearch"
                   placeholder="æœç´¢çƒŸèŠ±..."
                   class="search-input">
        </div>

        <!-- åˆ†ç±»é€‰æ‹© -->
        <div class="category-wrapper">
            <div class="category-container" ref="categoryContainer">
                <div class="category-item" 
                     :class="{active: currentCategory === 'all'}"
                     @click="currentCategory = 'all'">å…¨éƒ¨</div>
                <div class="category-item" 
                     v-for="category in categories" 
                     :key="category"
                     :class="{active: currentCategory === category}"
                     @click="currentCategory = category">
                    {{ category }}
                </div>
            </div>
        </div>

        <!-- çƒŸèŠ±åˆ—è¡¨ -->
        <div class="fireworks-list">
            <template v-if="filteredFireworks.length > 0">
                <div class="firework-item" 
                     v-for="firework in filteredFireworks" 
                     :key="firework.id"
                     @click="showDetail(firework)">
                    <div class="firework-cover">
                        <img v-if="firework.cover" 
                             :src="firework.cover" 
                             :alt="firework.name" 
                             loading="lazy">
                        <div v-else class="no-cover">
                            <span class="no-cover-icon">ğŸ“·</span>
                            <span class="no-cover-text">æš‚æ— å°é¢</span>
                        </div>
                    </div>
                    <div class="firework-info">
                        <h3>{{ firework.name }}</h3>
                        <div class="firework-price">ï¿¥{{ parseFloat(firework.price).toFixed(2) }}</div>
                    </div>
                </div>
            </template>
            <div v-else class="no-results">
                <div class="no-results-content">
                    <span class="no-results-icon">ğŸ”</span>
                    <p>æ²¡æœ‰æ‰¾åˆ°ç›¸å…³å•†å“</p>
                    <button @click="clearSearch" class="clear-search-btn">æ¸…é™¤æœç´¢</button>
                </div>
            </div>
            
            <!-- åŠ è½½æ›´å¤šè§¦å‘å™¨ -->
            <div class="loading-trigger" v-if="hasMore">
                <div class="loading-spinner" v-if="loading"></div>
                <span v-else>åŠ è½½æ›´å¤š...</span>
            </div>
        </div>

        <!-- è¯¦æƒ…å¼¹çª— -->
        <div class="detail-modal" v-if="selectedFirework">
            <div class="detail-content">
                <button class="close-btn" @click="closeDetail"></button>
                
                <!-- è§†é¢‘éƒ¨åˆ† -->
                <div class="video-container">
                    <video v-if="selectedFirework.video" controls>
                        <source :src="selectedFirework.video" type="video/mp4">
                        æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾ã€‚
                    </video>
                    <div v-else class="no-video-placeholder">
                        <span class="no-video-icon">ğŸ¬</span>
                        <p>è¯¥å•†å“æš‚æ— è§†é¢‘</p>
                    </div>
                </div>
                
                <!-- å•†å“ä¿¡æ¯éƒ¨åˆ† -->
                <div class="product-info">
                    <h2 class="product-name">{{ selectedFirework.name }}</h2>
                    <div class="product-category">
                        <span class="category-label">åˆ†ç±»ï¼š</span>
                        <span class="category-value">{{ selectedFirework.category }}</span>
                    </div>
                </div>
                
                <!-- å›¾ç‰‡éƒ¨åˆ† -->
                <div class="detail-images" v-if="selectedFirework.details && selectedFirework.details.length">
                    <img v-for="(img, index) in selectedFirework.details" 
                         :key="index" 
                         :src="img" 
                         loading="lazy"
                         @click="showFullImage(img)">
                </div>
                
                <!-- ä»·æ ¼æ˜¾ç¤ºéƒ¨åˆ† -->
                <div class="price">
                    <span class="currency">ï¿¥</span>
                    <span class="amount">{{ parseFloat(selectedFirework.price).toFixed(2) }}</span>
                </div>
            </div>
        </div>
    </div>
    <script src="assets/js/fireworks.js"></script>
</body>
</html> 